<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hindi Formative Assignment Grade Entry</title>
  <style>
    body {
      font-family: "Trebuchet MS", sans-serif;
      background: linear-gradient(to bottom, #e0f7fa, #f1f8e9);
      margin: 0;
      padding: 20px;
    }
    .school-header {
      text-align: center;
      font-size: 1.8rem;
      font-weight: bold;
      color: #1b5e20;
      background: #a5d6a7;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .sub-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      margin-bottom: 20px;
      padding: 10px;
    }
    .sub-header h1 {
      margin: 0;
      font-size: 1.6rem;
      color: #2e7d32;
      background: #c8e6c9;
      padding: 10px 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .teacher-info {
      font-size: 1rem;
      color: #1565c0;
      font-weight: bold;
      text-align: right;
    }
    h2 {
      text-align: center;
      color: #1565c0;
      margin-top: 40px;
      background: #bbdefb;
      padding: 10px;
      border-radius: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 25px 0;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
      background: #fff;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    th {
      background: #4caf50;
      color: white;
      font-size: 1rem;
      letter-spacing: 0.5px;
    }
    tr:nth-child(even) {background: #f9fbe7;}
    tr:nth-child(odd) {background: #ffffff;}
    tr:hover {
      background: #ffe0b2;
      transition: 0.3s;
    }
    input[type="text"], input[type="number"] {
      padding: 6px;
      width: 90%;
      border: 1px solid #90a4ae;
      border-radius: 6px;
      text-align: center;
      background: #f1f8e9;
    }
    input[type="text"]:focus, input[type="number"]:focus {
      outline: none;
      border-color: #4caf50;
      background: #e8f5e9;
    }
    .pass { color: green; font-weight: bold; }
    .fail { color: red; font-weight: bold; }
    .absent { color: orange; font-weight: bold; }

    /* Button Styles */
    .btn {
      display: block;
      margin: 20px auto;
      padding: 12px 30px;
      font-size: 1.2rem;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: 0.3s;
    }
    .next-btn { background: #1565c0; }
    .next-btn:hover { background: #0d47a1; }
    .submit-btn { background: #2e7d32; }
    .submit-btn:hover { background: #1b5e20; }
    .reset-btn { background: #e53935; }
    .reset-btn:hover { background: #b71c1c; }
    .back-btn { background: #8e24aa; }
    .back-btn:hover { background: #6a1b9a; }

    .locked-message {
      text-align: center;
      font-size: 1.3rem;
      font-weight: bold;
      color: darkgreen;
      margin-top: 20px;
    }

    .table-section {
      display: none;
    }
    .active-section {
      display: block;
    }
  </style>
</head>
<body>

  <!-- School Header -->
  <div class="school-header">
    ST. JOSEPHS BOYS HIGH SCHOOL, MARIAPURAM, KADAPA
  </div>

  <!-- Sub Header with Title and Teacher Info -->
  <div class="sub-header">
    <h1>üìö Hindi Subject - Formative Assignment Grade Entry</h1>
    <div class="teacher-info">
      Teacher Name: SRI S. M. RAHIMAN <br>
      School Asst., Hindi
    </div>
  </div>

  <div id="tables-container"></div> <!-- container for tables -->

  <div id="lock-message"></div>

  <script>
    let currentSection = 0; 
    let sections = [];

    // Password Protection
    let teacherPassword = "teacher123"; // default password

    function createTable(className, section, studentCount) {
      let container = document.createElement("div");
      container.className = "table-section";

      let caption = document.createElement("h2");
      caption.textContent = `Class ${className} - Section ${section}`;
      container.appendChild(caption);

      let table = document.createElement("table");

      // Header row
      table.innerHTML = `
        <tr>
          <th>Roll No</th>
          <th>Section</th>
          <th>Name</th>
          <th>Marks (Max 50)</th>
          <th>Result</th>
          <th>Grade</th>
        </tr>`;

      // Rows for students
      for (let i = 1; i <= studentCount; i++) {
        let row = document.createElement("tr");
        row.innerHTML = `
          <td>${i}</td>
          <td>${section}</td>
          <td><input type="text" placeholder="Enter Name"></td>
          <td><input type="number" min="0" max="50"></td>
          <td class="result"></td>
          <td class="grade"></td>`;        

        // attach event to marks input
        let marksInput = row.querySelector("input[type='number']");
        marksInput.addEventListener("input", function() {
          evaluate(marksInput);
        });

        table.appendChild(row);
      }

      container.appendChild(table);

      // Navigation buttons
      let btnContainer = document.createElement("div");

      if (sections.length > 0) { // If there are previous sections, show Back button
        let backBtn = document.createElement("button");
        backBtn.textContent = "‚¨ÖÔ∏è Back";
        backBtn.className = "btn back-btn";
        backBtn.onclick = function() { previousSection(); };
        btnContainer.appendChild(backBtn);
      }

      if (sections.length < 3) { // for first 3 tables, show Next button
        let nextBtn = document.createElement("button");
        nextBtn.textContent = "Next ‚û°Ô∏è";
        nextBtn.className = "btn next-btn";
        nextBtn.onclick = function() { nextSection(); };
        btnContainer.appendChild(nextBtn);
      } else { // last table
        let submitBtn = document.createElement("button");
        submitBtn.textContent = "Submit";
        submitBtn.className = "btn submit-btn";
        submitBtn.onclick = submitForm;
        btnContainer.appendChild(submitBtn);

        let resetBtn = document.createElement("button");
        resetBtn.textContent = "Reset";
        resetBtn.className = "btn reset-btn";
        resetBtn.onclick = resetForm;
        btnContainer.appendChild(resetBtn);
      }

      container.appendChild(btnContainer);
      document.getElementById("tables-container").appendChild(container);
      sections.push(container);
    }

    function showSection(index) {
      sections.forEach((sec, i) => {
        sec.classList.remove("active-section");
        if (i === index) sec.classList.add("active-section");
      });
    }

    function nextSection() {
      if (currentSection < sections.length - 1) {
        currentSection++;
        showSection(currentSection);
      }
    }

    function previousSection() {
      if (currentSection > 0) {
        currentSection--;
        showSection(currentSection);
      }
    }

    function evaluate(input) {
      let marks = input.value.trim();
      let row = input.closest("tr");
      let resultCell = row.querySelector(".result");
      let gradeCell = row.querySelector(".grade");

      if (marks === "00") {
        resultCell.textContent = "Absent";
        resultCell.className = "result absent";
        gradeCell.textContent = "-";
        return;
      }

      let score = parseInt(marks);
      if (isNaN(score)) {
        resultCell.textContent = "";
        gradeCell.textContent = "";
        return;
      }

      if (score >= 17) {
        resultCell.textContent = "Pass";
        resultCell.className = "result pass";
      } else {
        resultCell.textContent = "Fail";
        resultCell.className = "result fail";
      }

      // Grade assignment
      if (score >= 45) gradeCell.textContent = "A+";
      else if (score >= 40) gradeCell.textContent = "A";
      else if (score >= 35) gradeCell.textContent = "B+";
      else if (score >= 30) gradeCell.textContent = "B";
      else if (score >= 25) gradeCell.textContent = "C";
      else if (score >= 17) gradeCell.textContent = "D";
      else gradeCell.textContent = "F";
    }

    function submitForm() {
      document.querySelectorAll("input").forEach(input => {
        input.disabled = true;
      });
      document.querySelector(".submit-btn").disabled = true;
      document.getElementById("lock-message").innerHTML = 
        "<div class='locked-message'>‚úÖ Form Submitted Successfully! All entries are now locked.</div>";
    }

    function resetForm() {
      let pwd = prompt("Enter teacher password to reset:");
      if (pwd === teacherPassword) {
        document.querySelectorAll("input").forEach(input => {
          input.disabled = false;
          input.value = "";
        });
        document.querySelector(".submit-btn").disabled = false;
        document.getElementById("lock-message").innerHTML = "";
        alert("Form unlocked. You can edit again.");
      } else {
        alert("Wrong password. Reset denied.");
      }
    }

    // Generate tables
    createTable(9, 'A', 38);
    createTable(9, 'B', 38);
    createTable(10, 'A', 28);
    createTable(10, 'B', 28);

    // Show first section
    showSection(0);
  </script>

</body>
</html>
